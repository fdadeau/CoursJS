<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Fetch </title>
<style>
</style>
    <script src="./includeInIFrame.js"></script>
    <script>
async function sendRequest() {    

  let key = prompt("Saisir la clé d'API Ginko");

  let response = await fetch("https://api.ginko.voyage/DR/getDetailsVariante.do?apiKey=" + key + "&idLigne=101&idVariante=15-0");  

  if (response.status == 200) {
    let data = await response.json();
    for (let i=0; i < data.objets.length; i++) {
      let numero = (i+1);
      let nom = data.objets[i].nom;
      document.getElementById("reponse").innerHTML += numero + " - " + nom + "<br>";
    }
  }
  document.getElementById("bouton").value = "C'est parti";
  document.getElementById("bouton").removeAttribute("onclick");
}
</script>
</head>

<body>
    <input type="button" id="bouton" onclick="sendRequest()" value="envoyer la requête">
    <div id="reponse"></div>
    
    
</body>

</html>
    